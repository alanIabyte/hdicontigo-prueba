(this["webpackJsonphdi-contigo"]=this["webpackJsonphdi-contigo"]||[]).push([[18],{1337:function(e,n,i){"use strict";i.r(n);var t=i(11),a=i(2),r=i(1),d=i(169),o=i(89),s=i(13),c=i(829),l=i(404),u=i(83),m=i(44),k=i(9),v=i(64),g=i(27),p=i.p+"static/media/ico_mis_sin.6f55ecce.svg",b=i(21),f=i(0),j="\xa1Califica nuestro servicio!",N="Tu opini\xf3n es clave para ayudarnos a mejorar tu experiencia. Selecciona el reporte del que deseas ver tus encuestas pendientes:",h="Por el momento no cuentas con encuestas pendientes. ",F={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"telefono"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"obtener_polizas"},arguments:[{kind:"Argument",name:{kind:"Name",value:"telefono"},value:{kind:"Variable",name:{kind:"Name",value:"telefono"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"codigo"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"completado"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mensaje"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dato"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reportes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"numeroReporte"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"numeroSiniestro"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"estatusReporte"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"descEstatusReporte"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tipoAtencion"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"descTipoAtencion"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idSubEvento"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nombreReporta"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fechaReporte"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ubicacion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"latitud"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"longitud"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"encuestasPend"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"poliza"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"poliza"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"numeroCertificado"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"numeroEndoso"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fechaInicio"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fechaTermino"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"oficina"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"numeroDocumento"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"estatus"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nombreCompletoAsegurado"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"telefonoAsegurado"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tipoAsegurado"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lineaNegocio"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"datosVehiculo"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"vin"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"imagenesVehiculo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nombre"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:881,source:{body:"query ($telefono: String!) {\r\n  obtener_polizas(telefono: $telefono) {\r\n    codigo\r\n    completado\r\n    mensaje\r\n    dato {\r\n      reportes {\r\n        numeroReporte\r\n        numeroSiniestro\r\n        estatusReporte\r\n        descEstatusReporte\r\n        tipoAtencion\r\n        descTipoAtencion\r\n        idSubEvento,\r\n        nombreReporta\r\n        fechaReporte\r\n        ubicacion {\r\n          latitud\r\n          longitud\r\n        }\r\n        encuestasPend\r\n      }\r\n      poliza {\r\n        poliza\r\n        numeroCertificado\r\n        numeroEndoso\r\n        fechaInicio\r\n        fechaTermino\r\n        oficina\r\n        numeroDocumento\r\n        estatus\r\n        nombreCompletoAsegurado\r\n        telefonoAsegurado\r\n        tipoAsegurado\r\n        lineaNegocio\r\n        datosVehiculo\r\n        vin\r\n        imagenesVehiculo {\r\n          nombre\r\n          url\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},O=b.a.nombreDeCookie,S=function(){var e=Object(o.f)(),n=(Object(s.c)((function(e){return e})),Object(l.a)([O])),i=Object(a.a)(n,3),b=i[0],S=(i[2],b[O]),x=S?S.Usuario:"5555555555",A=Object(c.b)(F,{variables:{telefono:x},fetchPolicy:"no-cache"}),R=A.data,z=A.loading,y=A.error,V=Object(r.useState)(!0),C=Object(a.a)(V,2),D=C[0],E=C[1],T=Object(r.useState)([]),_=Object(a.a)(T,2),P=_[0],q=_[1];return Object(r.useEffect)((function(){if(z)E(!0);else if(R&&R.obtener_polizas&&R.obtener_polizas.dato){var e=R.obtener_polizas.dato.filter((function(e){return e.reportes.some((function(e){return e.encuestasPend}))})).flatMap((function(e){var n=e.poliza.datosVehiculo;return e.reportes.filter((function(e){return e.encuestasPend})).map((function(e){return Object(t.a)(Object(t.a)({},e),{},{nombreAuto:n})}))}));q(e),E(!1)}else E(!1)}),[R,z,y]),Object(f.jsxs)(k.a,{children:[D&&Object(f.jsx)(g.a,{pantallaCompleta:!0}),Object(f.jsx)(u.a,{regresar:!0,funcionRegresar:function(){return e.goBack()}}),Object(f.jsxs)(k.c,{children:[Object(f.jsx)(v.j,{id:"titulo",children:j}),Object(f.jsx)(v.h,{children:P.length>0?N:h}),Object(f.jsx)(m.b,{children:null===P||void 0===P?void 0:P.map((function(n){return Object(f.jsx)(m.a,{show:!0,onClick:function(){return function(n){console.log(n),e.push("/elegir-encuesta",{reporte:n})}(n)},children:Object(f.jsxs)(m.d,{children:[Object(f.jsx)(m.e,{children:Object(f.jsx)(m.f,{src:p})}),Object(f.jsxs)(m.c,{children:[Object(f.jsxs)(m.h,{children:["Vehiculo: ",Object(f.jsx)("span",{children:n.nombreAuto})]}),Object(f.jsxs)(m.g,{children:["Fecha del reporte: ",n.fechaReporte]})]})]})})}))})]})]},Object(d.a)())};n.default=S}}]);