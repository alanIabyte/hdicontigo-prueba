(this["webpackJsonphdi-contigo"]=this["webpackJsonphdi-contigo"]||[]).push([[11],{1298:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=n||{};!function(e){function t(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.codes){t.codes={};for(var n=0;n<t.chars.length;++n)t.codes[t.chars[n]]=n}if(!a.loose&&e.length*t.bits&7)throw new SyntaxError("Invalid padding");for(var r=e.length;"="===e[r-1];)if(--r,!a.loose&&!((e.length-r)*t.bits&7))throw new SyntaxError("Invalid padding");for(var o=new(a.out||Uint8Array)(r*t.bits/8|0),i=0,s=0,c=0,u=0;u<r;++u){var l=t.codes[e[u]];if(void 0===l)throw new SyntaxError("Invalid character "+e[u]);s=s<<t.bits|l,(i+=t.bits)>=8&&(i-=8,o[c++]=255&s>>i)}if(i>=t.bits||255&s<<8-i)throw new SyntaxError("Unexpected end of data");return o}var a={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bits:6};e.decode=function(e,n){return console.log("decode:",t(e,a,n)),t(e,a,n)},e.encode=function(e,t){return function(e,t){for(var a=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).pad,n=void 0===a||a,r=(1<<t.bits)-1,o="",i=0,s=0,c=0;c<e.length;++c)for(s=s<<8|255&e[c],i+=8;i>t.bits;)i-=t.bits,o+=t.chars[r&s>>i];if(i&&(o+=t.chars[r&s<<t.bits-i]),n)for(;o.length*t.bits&7;)o+="=";return o}(e,a,t)}}(n)},1332:function(e,t,a){"use strict";a.r(t);var n,r,o,i=a(22),s=a(41),c=a(2),u=a(1),l=a(13),d=a(169),b=a(107),f=a.n(b),p=a(89),j=a(299),g=a.n(j),h=a(298),x=a.n(h),O=a(37),v=a(247),m=a(27),w=a(47),y=a(3),k=a(4),C=a(6),I=Object(k.a)(C.g)(n||(n=Object(y.a)(["\n  width: 100%;\n  height: 18px;\n  text-align: ",";\n  margin: 10px 0 65px;\n  text-align: left;\n  color: ",";\n  font-size: 14px;\n  &:hover {\n    text-decoration: underline;\n  }\n  &:active {\n    text-decoration: none;\n    font-weight: 700;\n  }\n"])),(function(e){return e.centrado?"center !important":""}),(function(e){return e.enlacePrincipal?"var(--color-verde-enlace)":"var(--color-negro-puro)"})),E=Object(k.a)(C.k)(r||(r=Object(y.a)(["\n  margin-top: -25px;\n  color: var(--color-negro-puro);\n\n  b {\n    font-family: var(--fuente-proxima-bold);\n  }\n"]))),U=k.a.div(o||(o=Object(y.a)(["\n  margin-top: 15px;\n  width: 100%;\n"]))),q=a(406),V=a(29),B=a(81),S=a(72),R=a(122),K=a(1298);function L(e){return M.apply(this,arguments)}function M(){return(M=Object(s.a)(Object(i.a)().mark((function e(t){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!0,e.next=4;break;case 4:return e.next=6,T(t);case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return F.apply(this,arguments)}function F(){return(F=Object(s.a)(Object(i.a)().mark((function e(t){var a,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=[]).push({id:K.a.decode(t,{loose:!0}),type:"public-key"}),e.next=4,P(a);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return A.apply(this,arguments)}function A(){return(A=Object(s.a)(Object(i.a)().mark((function e(t){var a,n,r,o,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"ieRcNEbJTsGEMu1G41ipkQ",a="required",n=window.location.hostname,r={rpId:n,challenge:K.a.decode("ieRcNEbJTsGEMu1G41ipkQ",{loose:!0})},0,t.length&&(r.allowCredentials=t),r.userVerification=a,e.prev=8,e.next=11,navigator.credentials.get({publicKey:r});case 11:if(o=e.sent,window.result=o,s=o.response.clientDataJSON,o.response.authenticatorData,o.response.signature,!s){e.next=20;break}return e.abrupt("return",!0);case 20:return e.abrupt("return",!1);case 21:e.next=27;break;case 23:return e.prev=23,e.t0=e.catch(8),console.log("error:",e.t0),e.abrupt("return",!1);case 27:case"end":return e.stop()}}),e,null,[[8,23]])})))).apply(this,arguments)}var H=a.p+"static/media/biometrico-face.cdade102.svg",D=a.p+"static/media/biomnetrico-huella.318fdb76.svg",G=a(0),J="estandar",N="boton-estandar",z="boton-deshabilitado",Q=function(e){var t=e.asignarValorMostrarPantallaIngreso,a=e.asignarValorFocoContrasena,n=e.asignarValorFocoUsuario,r=e.asignarValorMostrarAlertaBometricosNoRegistrados,o=e.asignarValorMostrarPantallaIngresoUsernameBiometrico,b=e.asignarValorRegistraBiosExistente,j=e.cargando,h=e.asignarValorCargando,y=e.mostrarPantallaIngreso,k=e.focoUsuario,K=e.focoContrasena,M=e.iniciarSesionMutation,T=e.iniciarSesionBiometrico,F=e.valores,P=e.bloqueoUsuario,A=e.intentosRestantes,Q=e.registraBiosExistente,W=Object(p.f)(),$=Object(u.useRef)(),X=Object(l.b)(),Y=Object(l.c)((function(e){return e})),Z=Object(u.useState)(""),_=Object(c.a)(Z,2),ee=_[0],te=_[1],ae=Object(u.useState)(!1),ne=Object(c.a)(ae,2),re=(ne[0],ne[1],Object(u.useState)(!0)),oe=Object(c.a)(re,2),ie=oe[0],se=oe[1],ce=Object(u.useState)(Y&&Y.DatosWebAuthn?Y.DatosWebAuthn:{publicKeyCredentialId:"",TieneHuella:!1}),ue=Object(c.a)(ce,2),le=ue[0],de=(ue[1],Object(R.a)()?H:D),be=function(){var e=Object(s.a)(Object(i.a)().mark((function e(){var t,r,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=F.usuario,r=F.contrasena,t&&r&&(o=!1,a(""),/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,4})+$/.test(t)||/^\d{10}$/.test(t)?(o=!0,n(""),te("")):(n("error"),te(B.f.errorUsuario)),o&&(n(""),h(!0),M({variables:{usuario:t,contrasena:r,latitud:"0000",longitud:"0000",plataforma:"HDI Contigo"}})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function fe(){return pe.apply(this,arguments)}function pe(){return(pe=Object(s.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===le.publicKeyCredentialId||!le.TieneHuella){e.next=7;break}return e.next=3,L(le.publicKeyCredentialId);case 3:e.sent?T({variables:{usuario:F.usuario,publicKeyCredentialId:le.publicKeyCredentialId,plataforma:"HDI Contigo"}}):(X({type:"AGREGAR",valor:!1,indice:"registraBiometricosExistente"}),b(!1)),e.next=8;break;case 7:r(!0);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var je=function(){var e=$.current;e&&e.classList&&(e.classList.contains(N)&&e.classList.remove(N),e.classList.contains(z)||e.classList.add(z))},ge=function(){var e=$.current;e&&e.classList&&(e.classList.contains(z)&&e.classList.remove(z),e.classList.contains(N)||e.classList.add(N))};Object(u.useEffect)((function(){je()}),[]),Object(u.useEffect)((function(){y&&(""!==le.publicKeyCredentialId||le.TieneHuella?fe():console.log("no tiene huella "))}),[y]);var he=Object(G.jsx)(x.a,{}),xe=Object(G.jsx)(g.a,{});return Object(G.jsx)(u.Fragment,{children:Object(G.jsxs)(v.a,{children:[j?Object(G.jsx)(m.a,{tema:"verde"}):null,Object(G.jsx)(w.a,{alt:"hdi-contigo hdi-tu-compania",style:{marginBottom:"25px",marginTop:"40px"},children:Object(G.jsx)(w.f,{src:q.a,alt:"hdi-contigo hdi-tu-compania"})}),Object(G.jsx)(w.i,{type:"button",onClick:function(){S.a.showKeycloak?(t(!1),o(!0)):t(!1)},children:Object(G.jsx)(f.a,{id:"botonRegresar",fontSize:"large"})}),Object(G.jsx)(w.l,{id:"tituloIngreso",ingreso:!0,children:S.a.showKeycloak?B.f.mensajeBienvenido:B.f.mensajeIngreso}),Object(G.jsx)(E,{id:"usuarioBiometrico",children:F.usuario}),Object(G.jsx)(w.k,{}),S.a.showKeycloak?Object(G.jsx)(G.Fragment,{}):Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(O.a,{id:"campoUsuario",etiqueta:B.f.etiquetaUsuario,marcador:"Ingresa tu n\xfamero de t\xe9lefono",enCambio:function(e){if(e){var t=e.target.value;F.usuario=t,t&&F.contrasena?(ge(),J="estandar"):(je(),J="deshabilitado")}},foco:k,valor:F.usuario}),""!==ee&&Object(G.jsx)(C.j,{id:"errorUsuario",children:ee})]}),Object(G.jsx)(w.k,{}),Object(G.jsx)(O.a,{id:"campoContrasena",etiqueta:B.f.etiquetaContrasena,esContrasena:ie,marcador:"Ingresa tu contrase\xf1a",marginTop:!0,icono:ie?he:xe,enCambio:function(e){if(e){var t=e.target.value;F.contrasena=t,t&&F.usuario?(ge(),J="estandar"):(je(),J="deshabilitado")}},foco:K,valor:F.contrasena,enClickIcono:function(){se(!ie)}}),P&&A>0&&Object(G.jsxs)(C.j,{id:"errorUsuario",style:{marginTop:"15px"},children:["Intentos de acceso antes de bloquear el usuario: ",A]}),0===A&&Object(G.jsx)(C.j,{id:"errorUsuario",style:{marginTop:"15px"},children:"Usuario bloqueado"}),Object(G.jsx)(I,{id:"enlaceOlvideContrasena",style:{marginTop:"20px"},enlacePrincipal:!0,centrado:!0,onClick:function(){W.push("/contrasena-olvidada")},children:B.f.linkOlvideContrasena}),S.a.showKeycloak?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(V.a,{ref:$,etiqueta:B.f.etiquetaEntrar,tema:J,id:"botonIngresar",enClick:function(){be()}}),Object(G.jsx)(U,{children:Q?Object(G.jsx)(G.Fragment,{}):Object(G.jsx)(V.a,{etiqueta:B.f.etiquetaEntrarHuella2,tema:"simple-circular",id:"botonIngresarHuella2",enClick:function(){fe()},icono:de})})]}):Object(G.jsx)(V.a,{ref:$,etiqueta:B.f.etiquetaEntrar,tema:J,id:"botonIngresar",enClick:function(){be()}})]})},Object(d.a)())};Q.defaultProps={asignarValorMostrarPantallaIngreso:function(){},asignarValorFocoContrasena:function(){},asignarValorFocoUsuario:function(){},asignarValorMostrarAlertaBometricosNoRegistrados:function(){},asignarValorMostrarPantallaIngresoUsernameBiometrico:function(){},asignarValorRegistraBiosExistente:function(){},cargando:!1,asignarValorCargando:function(){},focoUsuario:"",focoContrasena:"",iniciarSesionMutation:function(){},iniciarSesionBiometrico:function(){},valores:{},bloqueoUsuario:!1,mostrarPantallaIngreso:!1,intentosRestantes:3,registraBiosExistente:!1};t.default=Q}}]);